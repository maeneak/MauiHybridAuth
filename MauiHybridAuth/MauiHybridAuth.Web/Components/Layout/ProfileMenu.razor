@using MauiHybridAuth.Shared.Theme
@inject NavigationManager NavigationManager

<MudStack>
    <MudSelect Label="Color Mode" @bind-Value="CustomAppTheme!.CurrentMode" 
        Dense="true"
        Variant="Variant.Text" Style="width:150px" 
        SelectedValuesChanged="@((IEnumerable<ThemeColorMode> e) => OnColorModeChanged(e))">
        <MudSelectItem Value="ThemeColorMode.System" Style="vertical-align:middle">
            <MudStack Row>
                <MudIcon Icon="@Icons.Material.Outlined.SettingsPower" />
                <MudText>System</MudText>
            </MudStack>
        </MudSelectItem>
        <MudSelectItem Value="ThemeColorMode.Light">
            <MudStack Row>
                <MudIcon Icon="@Icons.Material.Outlined.LightMode" />
                <MudText>Light</MudText>
            </MudStack>
        </MudSelectItem>
        <MudSelectItem Value="ThemeColorMode.Dark">
            <MudStack Row>
                <MudIcon Icon="@Icons.Material.Outlined.DarkMode" />
                <MudText>Dark</MudText>
            </MudStack>
        </MudSelectItem>
    </MudSelect>
</MudStack>

@code {
    [CascadingParameter]
    private CustomAppTheme? CustomAppTheme { get; set; }

    private void OnColorModeChanged(IEnumerable<ThemeColorMode> args)
    {
        NavigationManager.Refresh();
    }
}
